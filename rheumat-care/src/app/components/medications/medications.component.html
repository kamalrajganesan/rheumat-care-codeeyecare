<h2>Current systemic medications <span class="small">(tick all applicable)</span></h2>
<form [formGroup]="medicationsForm">
  <div class="checks">
    <label *ngFor="let medication of medications" class="check">
      <input
        type="checkbox"
        [checked]="isMedicationChecked(medication)"
        (change)="onMedicationChange(medication, $event)"
      />
      <span>{{ medication }}</span>
    </label>
  </div>

  <div *ngIf="showDoseDetails()" class="dose-details">
    <div class="divider"></div>
    <h2>Dose details (only for selected meds)</h2>

    <div *ngIf="showSteroidDose()">
      <label for="steroidDose">Systemic Steroid Dose / Regimen</label>
      <input
        type="text"
        id="steroidDose"
        formControlName="steroidDose"
        placeholder="e.g., Prednisolone 10 mg OD / 5 mg alternate day"
      />
    </div>

    <div *ngIf="showMethotrexateDose()">
      <label for="methotrexateDose">Methotrexate Dose (mg/week)</label>
      <input
        type="number"
        id="methotrexateDose"
        formControlName="methotrexateDose"
        min="0"
        step="0.5"
      />
    </div>

    <div *ngIf="showHCQDose()" class="hcq-note">
      <div class="small">HCQ dosing details will be entered in the HCQ Screening module below.</div>
    </div>

    <div *ngIf="showOtherMedication()">
      <label for="otherMedName">Other Medication Name / Dose</label>
      <input
        type="text"
        id="otherMedName"
        formControlName="otherMedName"
        placeholder="e.g., Azathioprine 50 mg BD"
      />
    </div>

    <label for="otherMedDetails">Additional Medication Notes</label>
    <textarea id="otherMedDetails" formControlName="otherMedDetails" placeholder="Any other relevant details..."></textarea>
  </div>
</form>
